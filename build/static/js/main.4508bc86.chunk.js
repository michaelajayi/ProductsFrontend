(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{120:function(e,t,a){"use strict";a.r(t);var c=a(1),n=a.n(c),r=a(32),s=a.n(r),o=(a(91),a(4)),u=a(19),i=a(10),l=(a(92),a(93),a(13)),d=a.n(l),p=a(20),j=a(128),b=a(129),m=a(126),h=a(25),O=a.n(h),x=function(){var e=JSON.parse(localStorage.getItem("token"));return null!==e?e.token:"Token does not exist!"},f=function(){var e=Object(p.a)(d.a.mark((function e(){var t,a,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=x(),"https://laravel-product-api.herokuapp.com/api",!t){e.next=16;break}return e.prev=3,O.a.defaults.headers.common.Authorization="Bearer ".concat(t),e.next=7,O.a.get("".concat("https://laravel-product-api.herokuapp.com/api","/user"));case 7:if(!(a=e.sent).data.success){e.next=11;break}return c=a.data.user,e.abrupt("return",c);case 11:e.next=16;break;case 13:return e.prev=13,e.t0=e.catch(3),e.abrupt("return",e.t0.status);case 16:case"end":return e.stop()}}),e,null,[[3,13]])})));return function(){return e.apply(this,arguments)}}(),v=f,g=function(){return null===localStorage.getItem("token")?null:JSON.parse(localStorage.getItem("token"))},y=a(2),N=function(){var e=Object(i.f)(),t=Object(c.useRef)("");return Object(c.useEffect)(Object(p.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v();case 2:t.current=e.sent,console.log(t.current);case 4:case"end":return e.stop()}}),e)}))),[]),Object(y.jsx)("div",{children:Object(y.jsxs)(j.a,{bg:"dark",variant:"dark",children:[Object(y.jsx)(j.a.Brand,{href:"/",className:"mx-5",children:"Products Store"}),Object(y.jsxs)(b.a,{className:"mr-auto navbar-wrapper flex-grow-1",children:[Object(y.jsx)(u.b,{to:"/products",className:"d-".concat(null===g()?"none":"block"),children:"Products"}),Object(y.jsx)(u.b,{to:"/add-product",className:"d-".concat(null===g()?"none":"block"),children:"Add Product"}),Object(y.jsx)(u.b,{to:"/login",className:"d-".concat(null===g()?"block":"none"),children:"Login"}),Object(y.jsx)(u.b,{to:"/register",className:"d-".concat(null===g()?"block":"none"),children:"Register"})]}),Object(y.jsx)(b.a,{style:{marginRight:"3rem"},className:"d-".concat(null===g()?"none":"block"),children:Object(y.jsx)(m.a,{className:"badge bg-dark text-white",title:t.current.name,children:Object(y.jsx)(m.a.Item,{onClick:function(){localStorage.clear(),e.push("/login")},children:"Logout"})})})]})})},k=function(e){var t=Object(c.useState)(""),a=Object(o.a)(t,2),n=a[0],r=a[1],s=Object(c.useState)(""),u=Object(o.a)(s,2),l=u[0],j=u[1],b=Object(i.f)();Object(c.useEffect)((function(){var e=JSON.parse(localStorage.getItem("token"));console.log(e)}),[]);var m=function(){var e=Object(p.a)(d.a.mark((function e(){var t,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={email:n,password:l},e.prev=1,e.next=4,fetch("https://laravel-product-api.herokuapp.com/api/login",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});case 4:return a=e.sent,e.next=7,a.json();case 7:!0===(a=e.sent).success?(localStorage.setItem("token",JSON.stringify(a)),b.push("/"),b.push("/")):localStorage.removeItem("token"),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(){return e.apply(this,arguments)}}();return Object(y.jsx)(c.Fragment,{children:Object(y.jsx)("div",{children:Object(y.jsxs)("div",{className:"col-md-8 col-lg-4 mx-auto text-center",children:[Object(y.jsx)("h1",{className:"display-4 my-5",children:"Login"}),Object(y.jsx)("input",{type:"text",className:"form-control mb-4",value:n,placeholder:"email",onChange:function(e){return r(e.target.value)}}),Object(y.jsx)("input",{type:"password",className:"form-control mb-4",value:l,placeholder:"password",onChange:function(e){return j(e.target.value)}}),Object(y.jsx)("button",{className:"btn btn-primary w-100",onClick:m,children:"Login"})]})})})},w=function(){var e=Object(c.useState)(""),t=Object(o.a)(e,2),a=t[0],n=t[1],r=Object(c.useState)(""),s=Object(o.a)(r,2),u=s[0],i=s[1],l=Object(c.useState)(""),j=Object(o.a)(l,2),b=j[0],m=j[1],h=function(){var e=Object(p.a)(d.a.mark((function e(){var t,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={name:a,email:u,password:b},e.next=3,fetch("https://laravel-product-api.herokuapp.com/api/register",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});case 3:return c=e.sent,e.next=6,c.json();case 6:c=e.sent,localStorage.setItem("user",JSON.stringify(c));case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(y.jsx)(c.Fragment,{children:Object(y.jsxs)("div",{className:"col-md-8 col-lg-4 mx-auto text-center mt-4",children:[Object(y.jsx)("h1",{className:"my-5 display-4",children:"Register"}),Object(y.jsx)("input",{type:"text",className:"form-control mb-4",placeholder:"name",value:a,onChange:function(e){return n(e.target.value)}}),Object(y.jsx)("input",{type:"text",className:"form-control mb-4",placeholder:"email",value:u,onChange:function(e){return i(e.target.value)}}),Object(y.jsx)("input",{type:"password",className:"form-control mb-4",placeholder:"password",value:b,onChange:function(e){return m(e.target.value)}}),Object(y.jsx)("button",{className:"btn btn-dark w-100",onClick:h,children:"Sign up"})]})})},C=Object(c.createContext)(),S=a(38),P=a(3),T="GET_PRODUCTS",R="ADD_PRODUCT",D="DELETE_PRODUCT",E="PRODUCT_ERROR",B="SET_CURRENT",A="UPDATE_PROUCT",I=function(e,t){switch(t.type){case T:return Object(P.a)(Object(P.a)({},e),{},{products:t.payload});case R:return Object(P.a)(Object(P.a)({},e),{},{products:[].concat(Object(S.a)(e.products),[t.payload])});case A:return Object(P.a)(Object(P.a)({},e),{},{contacts:[].concat(Object(S.a)(e.products),[t.payload])});case D:return Object(P.a)(Object(P.a)({},e),{},{products:e.products.filter((function(e){return e.id!==t.payload}))});case B:return Object(P.a)(Object(P.a)({},e),{},{current:t.payload});default:return e}},L="https://laravel-product-api.herokuapp.com/api",F=function(e){var t=Object(c.useReducer)(I,{products:[],current:null}),a=Object(o.a)(t,2),n=a[0],r=a[1],s=x(),u=function(){var e=Object(p.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,O.a.defaults.headers.common.Authorization="Bearer ".concat(s),e.next=4,O.a.get("".concat(L,"/products"));case 4:t=e.sent,r({type:T,payload:t.data}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),r({type:E,payload:e.t0.status});case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),i=function(){var e=Object(p.a)(d.a.mark((function e(t){var a,c,n,o,u,i,l;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=new FormData,c=t.name,n=t.price,o=t.description,u=t.file,a.append("name",c),a.append("price",n),a.append("description",o),a.append("file",u),i={headers:{"Content-Type":"multipart/form-data"}},e.prev=7,O.a.defaults.headers.common.Authorization="Bearer ".concat(s),e.next=11,O.a.post("".concat(L,"/products"),a,i);case 11:l=e.sent,r({type:R,payload:l.data}),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(7),console.log(e.t0.response.data.message),r({type:E,payload:e.t0.response.data.message});case 19:case"end":return e.stop()}}),e,null,[[7,15]])})));return function(t){return e.apply(this,arguments)}}(),l=function(){var e=Object(p.a)(d.a.mark((function e(t){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{"Content-Type":"multipart/form-data"}},e.prev=1,O.a.defaults.headers.common.Authorization="Bearer ".concat(s),e.next=5,O.a.delete("".concat(L,"/products/").concat(t),a);case 5:e.sent,r({type:D,payload:t}),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0.response.data.message),r({type:E,payload:e.t0.response.data.message});case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}(),j=function(){var e=Object(p.a)(d.a.mark((function e(t){var a,c,n,o,u,i,l,p;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=new FormData,c=t.id,n=t.name,o=t.price,u=t.description,i=t.file,a.append("name",n),a.append("price",o),a.append("description",u),a.append("file",i),l={headers:{"Content-Type":"application/json"}},e.prev=7,O.a.defaults.headers.common.Authorization="Bearer ".concat(s),e.next=11,O.a.put("".concat(L,"/products/").concat(c),t,l);case 11:p=e.sent,r({type:A,payload:p.data}),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(7),console.log(e.t0),r({type:E,payload:e.t0.response.data.message});case 19:case"end":return e.stop()}}),e,null,[[7,15]])})));return function(t){return e.apply(this,arguments)}}();return Object(y.jsx)(C.Provider,{value:{products:n.products,current:n.current,getProducts:u,addProduct:i,deleteProduct:l,updateProduct:j,setCurrent:function(e){r({type:B,payload:e})}},children:e.children})},J=function(){var e=Object(c.useContext)(C).addProduct,t=Object(c.useRef)(),a=(Object(i.f)(),Object(c.useState)("")),n=Object(o.a)(a,2),r=n[0],s=n[1],u=Object(c.useState)(""),l=Object(o.a)(u,2),d=l[0],p=l[1],j=Object(c.useState)(""),b=Object(o.a)(j,2),m=b[0],h=b[1],O=Object(c.useState)(""),x=Object(o.a)(O,2),f=x[0],v=x[1],g=function(){s(""),p(""),h(""),t.current.value=""};return Object(y.jsx)("div",{children:Object(y.jsx)("form",{onSubmit:function(t){t.preventDefault(),e({name:r,description:m,price:d,file:f}),g()},children:Object(y.jsxs)("div",{className:"col-sm-6 mx-auto my-5 text-center",children:[Object(y.jsx)("h1",{className:"display-4 my-5",children:"Add Product"}),Object(y.jsx)("input",{type:"text",className:"form-control mb-4",placeholder:"name",value:r,onChange:function(e){return s(e.target.value)}}),Object(y.jsx)("input",{type:"text",className:"form-control mb-4",placeholder:"price",value:d,onChange:function(e){return p(e.target.value)}}),Object(y.jsx)("input",{type:"text",className:"form-control mb-4",placeholder:"description",value:m,onChange:function(e){return h(e.target.value)}}),Object(y.jsx)("input",{type:"file",className:"form-control mb-4",ref:t,onChange:function(e){return v(e.target.files[0])}}),Object(y.jsx)("div",{children:Object(y.jsx)("input",{type:"submit",value:"Add Product",className:"btn btn-success btn-block w-sm-25"})})]})})})},U=a(44),_=function(e){var t=e.error;return null!=alert&&Object(y.jsxs)("div",{className:"alert alert-".concat(t.type," mt-2"),children:[Object(y.jsx)(U.a,{})," ",t.msg]})},z=function(){Object(i.f)();return Object(y.jsx)("div",{children:null===g()?Object(y.jsx)(_,{error:{type:"danger",msg:"Please login to access this page"}}):Object(y.jsx)(J,{})})},V=a(130),G=a(83),H=a(84),$=a(127),M=function(e){var t=e.product,a=t.name,c=t.description,n=t.price,r=t.file_path;return Object(y.jsxs)($.a,Object(P.a)(Object(P.a)({},e),{},{size:"md","aria-labelledby":"contained-modal-title-vcenter",centered:!0,children:[Object(y.jsx)($.a.Header,{closeButton:!0,children:Object(y.jsx)($.a.Title,{id:"contained-modal-title-vcenter",children:"Product Details"})}),Object(y.jsxs)($.a.Body,{className:"text-center",children:[Object(y.jsx)("img",{src:"https://laravel-product-api.herokuapp.com/"+r,img:!0,alt:c,style:{width:"100%"}}),Object(y.jsx)("h4",{className:"display-5 my-3",children:a}),Object(y.jsxs)("p",{className:"badge bg-success",children:["Price: $",n]})]})]}))},q=function(e){var t=e.product,a=Object(c.useContext)(C),r=a.deleteProduct,s=a.setCurrent,i=t.id,l=t.name,d=t.description,p=t.price,j=t.file_path,b=n.a.useState(!1),m=Object(o.a)(b,2),h=m[0],O=m[1];return Object(y.jsxs)(c.Fragment,{children:[Object(y.jsx)("div",{children:Object(y.jsxs)(V.a,{style:{width:"18rem"},className:"text-center",children:[Object(y.jsx)(V.a.Img,{variant:"top",src:"https://laravel-product-api.herokuapp.com/"+j,img:!0,alt:t.description,style:{width:"100%",height:"20%"}}),Object(y.jsxs)(V.a.Body,{children:[Object(y.jsx)(V.a.Title,{children:Object(y.jsxs)("strong",{children:[l," "]})}),Object(y.jsx)(V.a.Text,{children:d})]}),Object(y.jsxs)(V.a.Text,{children:[Object(y.jsx)("strong",{children:"Price: $"}),p]}),Object(y.jsx)(V.a.Body,{children:Object(y.jsxs)(V.a.Link,{href:"#",children:[Object(y.jsx)(G.a,{variant:"info",className:"mx-2 btn-sm",onClick:function(){return O(!0)},children:Object(y.jsx)(U.a,{className:"text-white"})}),Object(y.jsx)(G.a,{variant:"dark",className:"mx-2 btn-sm",children:Object(y.jsxs)(u.b,{to:"/products/update/"+i,onClick:function(){return s(t)},children:[Object(y.jsx)(H.a,{className:"text-white"})," "]})}),Object(y.jsx)(G.a,{variant:"danger",className:"mx-2 btn-sm",onClick:function(){return r(i)},children:Object(y.jsx)(U.b,{})})]})})]})}),Object(y.jsx)(M,{show:h,onHide:function(){return O(!1)},product:t})]})},K={display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gridGap:"3rem"},Q=function(){var e=Object(c.useContext)(C),t=e.products,a=e.getProducts,n=Object(i.f)();return Object(c.useEffect)((function(){null===g()?n.push("/login"):a()}),[]),Object(y.jsx)("div",{children:Object(y.jsxs)("div",{className:"col-sm-10   mx-auto my-5",children:[Object(y.jsx)("h1",{className:"display-4 text-center mt-5 mb-4",children:"Product List"}),Object(y.jsx)("p",{className:"text-center mb-5 w-75 mx-auto",children:"Lorem ipsum, dolor sit amet consectetur adipisicing elit. Autem voluptatem iusto suscipit voluptates optio placeat aspernatur harum exercitationem dignissimos accusantium."}),Object(y.jsxs)("h1",{className:"display-6 text-center",children:[" ",t.length<=0?"No products in table yet!":""]}),Object(y.jsx)("div",{style:K,children:t.map((function(e){return Object(y.jsx)(q,{product:e},e.id)}))})]})})},W=function(){var e=Object(c.useContext)(C),t=(e.addProduct,e.updateProduct),a=e.current,n=Object(c.useRef)(),r=Object(i.f)();Object(c.useEffect)((function(){null!==a?(d(a.name),m(a.price),f(a.description)):(d(""),m(""),f(""),n.current.value="")}),[]);var s=Object(c.useState)(""),u=Object(o.a)(s,2),l=u[0],d=u[1],p=Object(c.useState)(""),j=Object(o.a)(p,2),b=j[0],m=j[1],h=Object(c.useState)(""),O=Object(o.a)(h,2),x=O[0],f=O[1],v=Object(c.useState)(""),g=Object(o.a)(v,2),N=g[0],k=g[1],w=function(){d(""),m(""),f(""),n.current.value=""};return Object(y.jsx)("div",{children:Object(y.jsx)("form",{onSubmit:function(e){e.preventDefault();var c={name:l,description:x,price:b,file:N};c.id=a.id,t(c),w(),r.push("/")},children:Object(y.jsxs)("div",{className:"col-sm-6 mx-auto my-5 text-center",children:[Object(y.jsx)("h1",{className:"display-4 my-5",children:"Update Product"}),Object(y.jsx)("input",{type:"text",className:"form-control mb-4",placeholder:"name",defaultValue:l,onChange:function(e){return d(e.target.value)}}),Object(y.jsx)("input",{type:"text",className:"form-control mb-4",placeholder:"price",defaultValue:b,onChange:function(e){return m(e.target.value)}}),Object(y.jsx)("input",{type:"text",className:"form-control mb-4",placeholder:"description",defaultValue:x,onChange:function(e){return f(e.target.value)}}),Object(y.jsx)("input",{type:"file",className:"form-control mb-4",ref:n,onChange:function(e){return k(e.target.files[0])}}),Object(y.jsx)("div",{children:Object(y.jsx)("input",{type:"submit",value:"Update Product",className:"btn btn-success btn-block w-sm-25"})})]})})})};var X=function(){var e=Object(c.useState)({}),t=Object(o.a)(e,2);return t[0],t[1],Object(y.jsx)(F,{children:Object(y.jsxs)(u.a,{children:[Object(y.jsx)(N,{}),Object(y.jsx)("div",{className:"container",children:Object(y.jsxs)(i.c,{children:[Object(y.jsx)(i.a,{exact:!0,path:"/",component:Q}),Object(y.jsx)(i.a,{exact:!0,path:"/products",component:Q}),Object(y.jsx)(i.a,{exact:!0,path:"/products/update/:id",component:W}),Object(y.jsx)(i.a,{exact:!0,path:"/login",component:k}),Object(y.jsx)(i.a,{exact:!0,path:"/register",component:w}),Object(y.jsx)(i.a,{exact:!0,path:"/add-product",component:z})]})})]})})},Y=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,131)).then((function(t){var a=t.getCLS,c=t.getFID,n=t.getFCP,r=t.getLCP,s=t.getTTFB;a(e),c(e),n(e),r(e),s(e)}))};s.a.render(Object(y.jsx)(n.a.StrictMode,{children:Object(y.jsx)(X,{})}),document.getElementById("root")),Y()},91:function(e,t,a){},93:function(e,t,a){}},[[120,1,2]]]);
//# sourceMappingURL=main.4508bc86.chunk.js.map